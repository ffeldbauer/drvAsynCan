#################################################
# ###                                       ### #
# ### EPICS Database for                    ### #
# ###   ISEG EHS 8 210p-F                   ### #
# ###   ISEG EHS 8 620p-F                   ### #
# ###                                       ### #
# ### author: F.Feldbauer                   ### #
# ###                                       ### #
# ### Ref 1.0; 2012-09-17                   ### #
# ###                                       ### #
# ### macros: subsys  PANDA subsystem       ### #
# ###         BUS     AsynPort              ### #
# ###         crate   crate id (0-7)        ### #
# ###         module  module id (0-7)       ### #
# ###         channel channel number (0-7)  ### #
# ###         maxV    Max Value for Vset    ### #
# ###         maxI    Max Value for Iset    ### #
#################################################

##########################
# ### scan instances ### #
##########################
record (seq, "PANDA:$(subsys):HV:$(crate):masterSCAN") {
  field (SCAN, "Passive")
  # Selection Algorithm
  field (SELM, "All")
  # Output Delay in seconds
  field (DLY1, "0.00")
  field (DLY2, "0.45")
  field (DLY3, "0.90")
  field (DLY4, "1.35") 
  field (DLY5, "1.80")
  field (DLY6, "2.25")
  field (DLY7, "2.70")
  field (DLY8, "3.15")
  # Desired Output Links
  field (DOL1, "1")
  field (DOL2, "1")
  field (DOL3, "1")
  field (DOL4, "1")
  field (DOL5, "1")
  field (DOL6, "1")
  field (DOL7, "1")
  field (DOL8, "1")
  # Output links
  field (LNK1, "PANDA:$(subsys):HV:$(crate):0:moduleSCAN.PROC")
  field (LNK2, "PANDA:$(subsys):HV:$(crate):1:moduleSCAN.PROC")
  field (LNK3, "PANDA:$(subsys):HV:$(crate):2:moduleSCAN.PROC")
  field (LNK4, "PANDA:$(subsys):HV:$(crate):3:moduleSCAN.PROC")
  field (LNK5, "PANDA:$(subsys):HV:$(crate):4:moduleSCAN.PROC")
  field (LNK6, "PANDA:$(subsys):HV:$(crate):5:moduleSCAN.PROC")
  field (LNK7, "PANDA:$(subsys):HV:$(crate):6:moduleSCAN.PROC")
  field (LNK8, "PANDA:$(subsys):HV:$(crate):7:moduleSCAN.PROC")
}

record (seq, "PANDA:$(subsys):HV:$(crate):$(module):moduleSCAN") {
  field (SCAN, "Passive")
  # Selection Algorithm
  field (SELM, "All")
  # Output Delay in seconds
  field (DLY1, "0.00")
  field (DLY2, "0.05")
  field (DLY3, "0.10")
  field (DLY4, "0.15") 
  field (DLY5, "0.20")
  field (DLY6, "0.25")
  field (DLY7, "0.30")
  field (DLY8, "0.35")
  field (DLY9, "0.40")
  # Desired Output Links
  field (DOL1, "1")
  field (DOL2, "1")
  field (DOL3, "1")
  field (DOL4, "1")
  field (DOL5, "1")
  field (DOL6, "1")
  field (DOL7, "1")
  field (DOL8, "1")
  field (DOL9, "1")
  # Output links
  field (LNK1, "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.PROC")
  field (LNK2, "PANDA:$(subsys):HV:$(crate):$(module):0:Status.PROC")
  field (LNK3, "PANDA:$(subsys):HV:$(crate):$(module):1:Status.PROC")
  field (LNK4, "PANDA:$(subsys):HV:$(crate):$(module):2:Status.PROC")
  field (LNK5, "PANDA:$(subsys):HV:$(crate):$(module):3:Status.PROC")
  field (LNK6, "PANDA:$(subsys):HV:$(crate):$(module):4:Status.PROC")
  field (LNK7, "PANDA:$(subsys):HV:$(crate):$(module):5:Status.PROC")
  field (LNK8, "PANDA:$(subsys):HV:$(crate):$(module):6:Status.PROC")
  field (LNK9, "PANDA:$(subsys):HV:$(crate):$(module):7:Status.PROC")
}

##########################################################
# ### Read out module status and module event status ### #
##########################################################
record (mbbiDirect, "PANDA:$(subsys):HV:$(crate):$(module):ModStatus") {
  field (DTYP, "asynUInt32Digital")
  field (INP,  "@asynMask($(BUS),0,0xffff,1)ISEGHV_MOD_STATUS")
  field (FLNK, "PANDA:$(subsys):HV:$(crate):$(module):ModEventStatus")

  # Bit  0: isADJ              0: fine adjustment off  1: fine adjustment on
  # Bit  1: reserved
  # Bit  2: isLVINS            0: no ...               1: Live Insertion mode
  # Bit  3: reserved
  # Bit  4: needSrvc           0:                      1: Hardware failure detected
  # Bit  5: isHwVLIMgd         0: HwVLIM not in range  1: HwVLIM in range
  # Bit  6: isIERR             0: no error             1: Input error in connection
  # Bit  7: reserved
  # Bit  8: isnoSERR           0: Error                1: sum of all channel error flags=0
  # Bit  9: isnoRAMP           0: channel is ramping   1: no channel is ramping
  # Bit 10: isSFLPgd           0: safety loop broken   1: Safety loop closed
  # Bit 11: isEVNTact          0: No Event active      1: any Event active
  # Bit 12: isMODgd            0: Module not good      1: Module is good
  # Bit 13: isSPLYgd           0: Supply out of range  1: Supply OK
  # Bit 14: isTMPgd            0: Temp above 55degC    1: Temperature within range
  # Bit 15: isKILena           0: state kill disable   1: state kill enable
}

record (mbbiDirect, "PANDA:$(subsys):HV:$(crate):$(module):ModEventStatus") {
  field (DTYP, "asynUInt32Digital")
  field (INP,  "@asynMask($(BUS),0,0xffff,1)ISEGHV_MOD_EVENT_STATUS")
  field (FLNK, "PANDA:$(subsys):HV:$(crate):$(module):BoardTemperature")

  # Bit  0: reserved
  # Bit  1: reserved
  # Bit  2: ELVINS             0:                      1: Event live insertion to prepare a hot plug of a module
  # Bit  3: reserved
  # Bit  4: ESrvc              0:                      1: Hardware failure detected
  # Bit  5: EHwVLIMngd         0:                      1: HwVLIM out of range
  # Bit  6: EIERR              0:                      1: Input Error in connection
  # Bit  7: reserved
  # Bit  8: reserved
  # Bit  9: reserved
  # Bit 10: ESFLPngd           0:                      1: Safety loop open
  # Bit 11: reserved
  # Bit 12: reserved
  # Bit 13: ESPLYngd           0:                      1: Supply is not good 
  # Bit 14: ETMPngd            0:                      1: Temperature above 55degC
  # Bit 15: reserved
}

######################################
# ### Read out board temperature ### #
######################################
record (ai, "PANDA:$(subsys):HV:$(crate):$(module):BoardTemperature") {
  field (DTYP, "asynFloat64")
  field (INP,  "@asyn($(BUS),0,1)ISEGHV_TEMPERATURE")
  # display parameters
  field (EGU,  "degC")
  field (PREC, "2")
  # Alarm parameters
  field (HIHI, "50")
  field (HIGH, "40")
  field (LOW,  "0")
  field (LOLO, "0")
  field (HHSV, "MAJOR")
  field (HSV,  "MINOR")
  field (LSV,  "NO_ALARM")
  field (LLSV, "NO_ALARM")
  # thresholds
  field (ADEL, "1")
  field (MDEL, "0")
}

############################################################
# ### Read out channel status and channel event status ### #
############################################################
record (mbbiDirect, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status") {
  field (DTYP, "asynUInt32Digital")
  field (INP,  "@asynMask($(BUS),$(channel),0xffff,1)ISEGHV_CHAN_STATUS")
  field (FLNK, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus")

  # Bit  0: reserved
  # Bit  1: isREG     0: normal error evaluation  1: fast detection of a regulation error         NOT SUPPORTED
  # Bit  2: IEER      0: no input-error           1: incorrect message to control the module
  # Bit  3: isON      0: channel is off           1: channel is on (Vo is following Vset)
  # Bit  4: isRAMP    0: Vo is stable             1: Vo is ramping
  # Bit  5: isEMCY    0:                          1: channel is in state emergency off
  # Bit  6: isCC      0:                          1: channel is in state of current control
  # Bit  7: isCV      0:                          1: channel is in state of voltage control
  # Bit  8: reserved
  # Bit  9: reserved  
  # Bit 10: isCBND    0: channel is ok            1: |Imeas - Iset| > Ibounds
  # Bit 11: isVBND    0: channel is ok            1: |Vmeas - Vset| > Vbounds
  # Bit 12: isEINH    0: channel is ok            1: External Inhibit was scanned
  # Bit 13: isTRP     0: channel is ok            1: Vo is shut off to 0 V without ramp because the channel has been tripped
  # Bit 14: isCLIM    0: channel is ok            1: the hardware current limit is exceeded
  # Bit 15: isVLIM    0: channel is ok            1: the hardware voltage limit is exceeded
}

record (mbbiDirect, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus") {
  field (DTYP, "asynUInt32Digital")
  field (INP,  "@asynMask($(BUS),$(channel),0xffff,1)ISEGHV_CHAN_EVENT_STATUS")
  field (FLNK, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Vmom")

  # Bit  0: reserved
  # Bit  1: reserved
  # Bit  2: EIER               0:                      1: Input Error occurred
  # Bit  3: EOn2Off            0:                      1: Channel switched off w/o ramp
  # Bit  4: EEOR               0:                      1: Ramp ended
  # Bit  5: EEMCY              0:                      1: emergency off
  # Bit  6: ECC                0:                      1: current control
  # Bit  7: EVC                0:                      1: voltage control
  # Bit  8: reserved
  # Bit  9: reserved
  # Bit 10: ECBNDs             0:                      1: current is/was out of bounds
  # Bit 11: EVBNDs             0:                      1: voltage is/was out of bounds
  # Bit 12: EEINH              0:                      1: Ext Inhibit signal triggered
  # Bit 13: ETRP               0:                      1: Channel tripped
  # Bit 14: ECLIM              0:                      1: current limit is/was exceeded
  # Bit 15: EVLIM              0:                      1: voltage limit is/was exceeded
}

########################################
# ### Read out voltage and current ### #
########################################
record (ai, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Vmom") {
  field (DTYP, "asynFloat64")
  field (INP,  "@asyn($(BUS),$(channel),1)ISEGHV_CHAN_VMOM")
  # display parameters
  field (EGU,  "V")
  field (PREC, "1")
  # alarm parameters
  field (HIHI, "$(maxV)")
  field (HIGH, "$(maxV)")
  field (LOW,  "-1")
  field (LOLO, "-1")
  field (HHSV, "MAJOR")
  field (HSV,  "MINOR")
  field (LSV,  "MINOR")
  field (LLSV, "MAJOR")
  # thresholds
  field (ADEL, "1")
  field (MDEL, "0")
  field (FLNK, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Imom")
}

record (ai, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Imom") {
  field (DTYP, "asynFloat64")
  field (INP,  "@asyn($(BUS),$(channel),1)ISEGHV_CHAN_IMOM")
  # display parameters
  field (EGU,  "uA")
  field (PREC, "2")
  # alarm parameters
  field (HIHI, "$(maxI)")
  field (HIGH, "$(maxI)")
  field (LOW,  "-1")
  field (LOLO, "-1")
  field (HHSV, "MAJOR")
  field (HSV,  "MINOR")
  field (LSV,  "MINOR")
  field (LLSV, "MAJOR")
  # thresholds
  field (ADEL, "1")
  field (MDEL, "0")
}

####################
# ### switches ### #
####################
record (bo, "PANDA:$(subsys):HV:Switch") {
  field (DTYP, "asynUInt32Digital")
  field (OUT,  "@asynMask(iseg,0,1,1)ISEGHV_SWITCHONOFF")
  field (ZNAM, "OFF")
  field (ONAM, "ON")
}

record (bo, "PANDA:$(subsys):HV:EmergencyOff") {
  field (DTYP, "asynInt32")
  field (OUT,  "@asyn(iseg,0,1)ISEGHV_EMERGENCYOFF")
  field (ZNAM, "OFF")
  field (ONAM, "ON")
}

##########################
# ### Module Control ### #
##########################
# Bit  0: reserved
# Bit  1: reserved
# Bit  2: reserved
# Bit  3: reserved
# Bit  4: reserved
# Bit  5: setILK: Interlock: Interlock signal CRATE_ENABLE (WIENER MPOD crate, active TTL high
#         1: INTERLOCK singal in order to switch off HV and set bit EEINH of the EventStatus for all channels
#         0: reset the INTERLOCK signal in order to clear the bit EEINH of the EventStatus for all channels
# Bit  6: doCLEAR: ClearKill: Hardware ClearKill signal and clear all event singals of the module and the channels
#         1: Hardware ClearKill signal and clear all event signals of the module and the channels
#         0: no action
# Bit  7: reserved
# Bit  8: reserved
# Bit  9: reserved
# Bit 10: reserved
# Bit 11: setENDN: Endian: Order of bytes in word: 0 = Little Endian (INTEL); 1 = Big Endian (MOTOROLA)
#         1: big endian
#         0: little endian
#         SET CONSTANTLY TO 1
# Bit 12: setADJ: Adjust: Switch ON of fine adjustment
#         1: fine adjustment ON
#         0: fine adjustment OFF
#         SET CONSTANTLY TO 1
# Bit 13: reserved
# Bit 14: setKILena: KillEnable: Kill function
#         1: kill function enable
#         0: kill function disable
#         SET CONSTANTLY TO 1
# Bit 15: reserved

record (bo, "PANDA:$(subsys):HV:$(crate):$(module):doCLEAR") {
  field (DTYP, "asynInt32")
  field (OUT,  "@asyn($(BUS),0,1)ISEGHV_CLEAR_EVENT_STATUS")
}

record (ao, "PANDA:$(subsys):HV:$(crate):$(module):VoltageRampSpeed") {
  field (DTYP, "asynFloat64")
  field (OUT,  "@asyn($(BUS),0,1)ISEGHV_RAMPSPEED")
  field (VAL,  "4")
  field (DRVH, "20")
  field (DRVL, "0")
  field (PREC, "1")
  field (EGU,  "p.c.")
}

###################################
# ### Set voltage and current ### #
###################################
record (ao, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Vset") {
  field (DTYP, "asynFloat64")
  field (OUT,  "@asyn($(BUS),$(channel),1)ISEGHV_CHAN_VSET")
  field (DRVH, "$(maxV)")
  field (DRVL, "0")
  field (PREC, "1")
  field (EGU,  "V")
}

record (ao, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Iset") {
  field (DTYP, "asynFloat64")
  field (OUT,  "@asyn($(BUS),$(channel),1)ISEGHV_CHAN_ISET")
  field (DRVH, "$(maxI)")
  field (DRVL, "0")
  field (PREC, "2")
  field (EGU,  "uA")
}

##########################
# ### Channel status ### #
##########################
record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):IEER") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.B2 CP")
  field (ZNAM, "OK")
  field (ONAM, "Input Error")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MINOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):isOn") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.B3 CP")
  field (ZNAM, "off")
  field (ONAM, "on")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):isRamp") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.B4 CP")
  field (ZNAM, "stable")
  field (ONAM, "ramping")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):isEMCY") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.B5 CP")
  field (ZNAM, "-")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):isCC") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.B6 CP")
  field (ZNAM, "-")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):isCV") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.B7 CP")
  field (ZNAM, "-")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):isCBND") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.BA CP")
  field (ZNAM, "OK")
  field (ONAM, "Out of bounds")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):isVBND") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.BB CP")
  field (ZNAM, "OK")
  field (ONAM, "Out of bounds")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):isEINH") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.BC CP")
  field (ZNAM, "no")
  field (ONAM, "yes")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):isTRP") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.BD CP")
  field (ZNAM, "OK")
  field (ONAM, "tripped")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):isCLIM") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.BE CP")
  field (ZNAM, "OK")
  field (ONAM, "exceeded")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):isVLIM") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):Status.BF CP")
  field (ZNAM, "OK")
  field (ONAM, "exceeded")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

################################
# ### Channel event status ### #
################################
record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EIER") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.B2 CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MINOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EOn2Off") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.B3 CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EEOR") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.B4 CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EEMCY") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.B5 CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):ECC") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.B6 CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):ECV") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.B7 CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):ECBNDs") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.BA CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EVBNDs") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.BB CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EEINH") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.BC CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):ETRP") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.BD CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):ECLIM") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.BE CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EVLIM") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):$(channel):EventStatus.BF CP")
  field (ZNAM, "--")
  field (ONAM, "active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

#########################
# ### Module status ### #
#########################
record (bi, "PANDA:$(subsys):HV:$(crate):$(module):isADJ") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.B0 CP")
  field (ZNAM, "off")
  field (ONAM, "on")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):isLVINS") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.B2 CP")
  field (ZNAM, "off")
  field (ONAM, "on")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):needSrvc") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.B4 CP")
  field (ZNAM, "ok")
  field (ONAM, "Hardware failure detected")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):isIERR") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.B6 CP")
  field (ZNAM, "ok")
  field (ONAM, "Error")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MINOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):isnoSERR") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.B8 CP")
  field (ZNAM, "Error")
  field (ONAM, "ok")
  field (ZSV,  "MAJOR")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):isnoRAMP") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.B9 CP")
  field (ZNAM, "channel is ramping")
  field (ONAM, "all channels stable")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):isSFLPgd") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.BA CP")
  field (ZNAM, "broken")
  field (ONAM, "closed")
  field (ZSV,  "MAJOR")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):isEVNTact") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.BB CP")
  field (ZNAM, "no active Event")
  field (ONAM, "any event active")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):isMODgd") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.BC CP")
  field (ZNAM, "failure")
  field (ONAM, "ok")
  field (ZSV,  "MAJOR")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):isSPLYgd") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.BD CP")
  field (ZNAM, "Out of Range")
  field (ONAM, "ok")
  field (ZSV,  "MAJOR")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):isTMPgd") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.BE CP")
  field (ZNAM, "above 55 degC")
  field (ONAM, "within range")
  field (ZSV,  "MAJOR")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):isKILena") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModStatus.BF CP")
  field (ZNAM, "disabled")
  field (ONAM, "enabled")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

###############################
# ### Module Event status ### #
###############################
record (bi, "PANDA:$(subsys):HV:$(crate):$(module):ELVINS") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModEventStatus.B2 CP")
  field (ZNAM, "off")
  field (ONAM, "on")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "NO_ALARM")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):ESrvc") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModEventStatus.B4 CP")
  field (ZNAM, "-")
  field (ONAM, "Hardware failure detected")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):EIERR") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModEventStatus.B6 CP")
  field (ZNAM, "-")
  field (ONAM, "Input Error in connection")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):ESFLPngd") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModEventStatus.BA CP")
  field (ZNAM, "-")
  field (ONAM, "Safety loop open")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):ESPLYngd") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModEventStatus.BD CP")
  field (ZNAM, "-")
  field (ONAM, "Supply is not good")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

record (bi, "PANDA:$(subsys):HV:$(crate):$(module):ETMPngd") {
  field (INP,  "PANDA:$(subsys):HV:$(crate):$(module):ModEventStatus.BD CP")
  field (ZNAM, "-")
  field (ONAM, "Temperature above 55 degC")
  field (ZSV,  "NO_ALARM")
  field (OSV,  "MAJOR")
}

###############
# ### EOF ### #
###############
